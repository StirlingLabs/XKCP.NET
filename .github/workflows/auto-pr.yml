name: Auto Pr
on:
  repository_dispatch:
    types: [release]
jobs:
  linux:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Create new commit
        run: |
          git config --global user.email "daemon@stirlinglabs.com"
          git config --global user.name "StirlingLabsDaemon"
          echo 'New Release for XKCP ${{ github.event.client_payload.tag }}' > kcxk.md
          git add -A
          git commit -m "New release XKCP ${{ github.event.client_payload.tag }}"
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: 'New version XKCP ${{ github.event.client_payload.tag }}'
          branch: check-xkcp
          body: |
            - Please check new version XKCP
            - Auto-generated by [create-pull-request][1]
            [1]: https://github.com/StirlingLabs/XKCP/releases/tag/${{ github.event.client_payload.tag }}
          labels: |
            automated-pr